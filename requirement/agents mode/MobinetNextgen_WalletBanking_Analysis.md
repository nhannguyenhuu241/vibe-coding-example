# Module Li√™n k·∫øt v√≠/Ng√¢n h√†ng - Wallet Banking Analysis

**[‚¨ÖÔ∏è Quay l·∫°i Master Analysis](./MobinetNextgen_Master_Analysis.md)**

## Th√¥ng tin module | Module Information

- **T√™n module:** Li√™n k·∫øt v√≠/Ng√¢n h√†ng (Wallet Banking)
- **Lo·∫°i:** Upgrade
- **M√¥ t·∫£:** Cho ph√©p ng∆∞·ªùi d√πng li√™n k·∫øt ho·∫∑c h·ªßy li√™n k·∫øt v√≠ ho·∫∑c ng√¢n h√†ng
- **Actors:** TIN/PNC, Thu c∆∞·ªõc
- **Trigger:** Nh·∫•n ch·ª©c nƒÉng "Ph∆∞∆°ng th·ª©c thanh to√°n"
- **Priority:** High - Required for online payment methods

## S∆° ƒë·ªì lu·ªìng nghi·ªáp v·ª• | Business Process Flow

```mermaid
flowchart TD
    Start([Nh·∫•n "Ph∆∞∆°ng th·ª©c thanh to√°n"]) --> CheckLinking{Ki·ªÉm tra tr·∫°ng th√°i li√™n k·∫øt}
    
    CheckLinking -->|Ch∆∞a li√™n k·∫øt| NotLinked[Ch∆∞a li√™n k·∫øt FPT Pay]
    CheckLinking -->|ƒê√£ li√™n k·∫øt| Linked[ƒê√£ li√™n k·∫øt FPT Pay]
    
    NotLinked --> CheckAppInstall{ƒê√£ c√†i FPT Pay?}
    CheckAppInstall -->|Ch∆∞a c√†i| ShowInstallMessage[Hi·ªÉn th·ªã th√¥ng b√°o c√†i ƒë·∫∑t]
    CheckAppInstall -->|ƒê√£ c√†i| ShowLoginScreen[Hi·ªÉn th·ªã m√†n h√¨nh ƒëƒÉng nh·∫≠p FPT Pay]
    
    ShowInstallMessage --> InstallApp[User c√†i ƒë·∫∑t FPT Pay]
    InstallApp --> ShowLoginScreen
    
    ShowLoginScreen --> LoginFPTPay[ƒêƒÉng nh·∫≠p FPT Pay]
    LoginFPTPay --> LinkSuccess{Li√™n k·∫øt th√†nh c√¥ng?}
    
    LinkSuccess -->|Th√†nh c√¥ng| UpdateLinkStatus[C·∫≠p nh·∫≠t tr·∫°ng th√°i li√™n k·∫øt]
    LinkSuccess -->|Th·∫•t b·∫°i| LinkError[Hi·ªÉn th·ªã l·ªói li√™n k·∫øt]
    
    UpdateLinkStatus --> ShowLinkedInfo[Hi·ªÉn th·ªã th√¥ng tin ƒë√£ li√™n k·∫øt]
    LinkError --> NotLinked
    
    Linked --> ShowAccountInfo[Hi·ªÉn th·ªã th√¥ng tin t√†i kho·∫£n]
    ShowAccountInfo --> UserChoice{User ch·ªçn h√†nh ƒë·ªông}
    
    UserChoice -->|Xem th√¥ng tin| ShowDetails[Hi·ªÉn th·ªã chi ti·∫øt t√†i kho·∫£n]
    UserChoice -->|H·ªßy li√™n k·∫øt| ConfirmUnlink[X√°c nh·∫≠n h·ªßy li√™n k·∫øt]
    
    ShowDetails --> End([Ho√†n th√†nh])
    
    ConfirmUnlink --> UnlinkChoice{Ch·ªçn h·ªßy?}
    UnlinkChoice -->|ƒê·ªìng √Ω| ProcessUnlink[Th·ª±c hi·ªán h·ªßy li√™n k·∫øt]
    UnlinkChoice -->|H·ªßy| ShowAccountInfo
    
    ProcessUnlink --> UnlinkSuccess[H·ªßy li√™n k·∫øt th√†nh c√¥ng]
    UnlinkSuccess --> NotLinked
    
    ShowLinkedInfo --> End
    
    style Start fill:#e8f5e8
    style End fill:#e8f5e8
    style LinkSuccess fill:#bbdefb
    style UnlinkSuccess fill:#c8e6c9
    style LinkError fill:#ffcdd2
```

## Chi ti·∫øt t√≠ch h·ª£p FPT Pay | FPT Pay Integration Details

### Quy tr√¨nh li√™n k·∫øt v√≠ FPT Pay
```mermaid
sequenceDiagram
    participant User as Nh√¢n vi√™n
    participant App as Mobile App
    participant FPTPay as FPT Pay App
    participant API as Backend API
    participant FPTGateway as FPT Pay Gateway
    
    User->>App: Nh·∫•n "FPT Pay"
    App->>App: Ki·ªÉm tra c√†i ƒë·∫∑t FPT Pay
    
    alt FPT Pay ch∆∞a c√†i
        App->>User: "T√†i kho·∫£n c·ªßa b·∫°n ch∆∞a li√™n k·∫øt v√≠ FPT Pay..."
        User->>User: C√†i ƒë·∫∑t FPT Pay t·ª´ Store
    else FPT Pay ƒë√£ c√†i
        App->>FPTPay: M·ªü m√†n h√¨nh ƒëƒÉng nh·∫≠p
        FPTPay->>User: Y√™u c·∫ßu ƒëƒÉng nh·∫≠p
        User->>FPTPay: Nh·∫≠p th√¥ng tin ƒëƒÉng nh·∫≠p
        
        alt ƒêƒÉng nh·∫≠p th√†nh c√¥ng
            FPTPay->>FPTGateway: X√°c th·ª±c t√†i kho·∫£n
            FPTGateway->>API: Li√™n k·∫øt t√†i kho·∫£n
            API->>API: L∆∞u th√¥ng tin li√™n k·∫øt
            API-->>App: Li√™n k·∫øt th√†nh c√¥ng
            App->>User: Hi·ªÉn th·ªã th√¥ng tin t√†i kho·∫£n
        else ƒêƒÉng nh·∫≠p th·∫•t b·∫°i
            FPTPay-->>App: L·ªói ƒëƒÉng nh·∫≠p
            App->>User: Hi·ªÉn th·ªã l·ªói
        end
    end
```

### C·∫•u tr√∫c d·ªØ li·ªáu t√†i kho·∫£n li√™n k·∫øt
```mermaid
erDiagram
    LinkedAccount {
        id bigint PK
        user_id varchar FK
        wallet_type varchar "FPT_PAY"
        account_id varchar "FPT Pay account ID"
        phone_number varchar
        email varchar
        full_name varchar
        linked_date datetime
        status varchar "ACTIVE, SUSPENDED, EXPIRED"
        last_used datetime
    }
    
    User {
        user_id varchar PK
        employee_code varchar
        name varchar
        role varchar
    }
    
    LinkedAccount ||--|| User : belongs_to
```

## Business Rules chi ti·∫øt | Detailed Business Rules

### BR.4 - Quy t·∫Øc li√™n k·∫øt v√† h·ªßy li√™n k·∫øt

#### ƒêi·ªÅu ki·ªán li√™n k·∫øt FPT Pay
```javascript
validateLinkingEligibility(userId) {
    user = UserService.getUser(userId)
    
    // Check user role permissions
    if (!user.roles.includes('TIN') && 
        !user.roles.includes('PNC') && 
        !user.roles.includes('CUS')) {
        return {
            eligible: false,
            reason: "Kh√¥ng c√≥ quy·ªÅn li√™n k·∫øt v√≠"
        }
    }
    
    // Check if already linked
    existingLink = LinkedAccountService.getActiveLink(userId, 'FPT_PAY')
    if (existingLink) {
        return {
            eligible: false,
            reason: "T√†i kho·∫£n ƒë√£ li√™n k·∫øt v·ªõi v√≠ FPT Pay"
        }
    }
    
    // Check FPT Pay app installation
    if (!DeviceService.isAppInstalled('com.fpt.pay')) {
        return {
            eligible: false,
            reason: "Ch∆∞a c√†i ƒë·∫∑t ·ª©ng d·ª•ng FPT Pay",
            action: "INSTALL_APP"
        }
    }
    
    return { eligible: true }
}
```

#### Quy tr√¨nh h·ªßy li√™n k·∫øt
```mermaid
flowchart TD
    UnlinkRequest[Nh·∫•n "H·ªßy li√™n k·∫øt"] --> CheckActiveTransactions{C√≥ giao d·ªãch ƒëang x·ª≠ l√Ω?}
    
    CheckActiveTransactions -->|C√≥| BlockUnlink[Kh√¥ng cho ph√©p h·ªßy]
    CheckActiveTransactions -->|Kh√¥ng| ShowConfirmation[Hi·ªÉn th·ªã x√°c nh·∫≠n]
    
    BlockUnlink --> ShowBlockMessage["Kh√¥ng th·ªÉ h·ªßy li√™n k·∫øt khi c√≥ giao d·ªãch ƒëang x·ª≠ l√Ω"]
    
    ShowConfirmation --> UserConfirm{User x√°c nh·∫≠n?}
    UserConfirm -->|Kh√¥ng| CancelUnlink[H·ªßy thao t√°c]
    UserConfirm -->|C√≥| ProcessUnlink[Th·ª±c hi·ªán h·ªßy li√™n k·∫øt]
    
    ProcessUnlink --> CallAPI[G·ªçi API h·ªßy li√™n k·∫øt]
    CallAPI --> UpdateStatus[C·∫≠p nh·∫≠t tr·∫°ng th√°i INACTIVE]
    UpdateStatus --> NotifyUser[Th√¥ng b√°o th√†nh c√¥ng]
    NotifyUser --> RefreshUI[Refresh giao di·ªán]
    
    style CheckActiveTransactions fill:#fff3e0
    style BlockUnlink fill:#ffcdd2
    style NotifyUser fill:#c8e6c9
```

## Giao di·ªán ng∆∞·ªùi d√πng | User Interface

### M√†n h√¨nh ch∆∞a li√™n k·∫øt
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [‚Üê] Ph∆∞∆°ng th·ª©c thanh to√°n          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ üí≥ V√≠ FPT Pay                       ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ [üè¶] FPT Pay    [Ch∆∞a li√™n k·∫øt >]   ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚ÑπÔ∏è Li√™n k·∫øt v√≠ FPT Pay ƒë·ªÉ thanh     ‚îÇ
‚îÇ   to√°n nhanh ch√≥ng v√† thu·∫≠n ti·ªán    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚Ä¢ B·∫£o m·∫≠t cao                       ‚îÇ
‚îÇ ‚Ä¢ Thanh to√°n nhanh                  ‚îÇ
‚îÇ ‚Ä¢ Kh√¥ng ph√≠ giao d·ªãch               ‚îÇ
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### M√†n h√¨nh ƒë√£ li√™n k·∫øt
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [‚Üê] T√†i kho·∫£n thanh to√°n            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ üë§ Th√¥ng tin t√†i kho·∫£n              ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ H·ªç v√† t√™n nh√¢n s·ª±                   ‚îÇ
‚îÇ Nguy·ªÖn VƒÉn An                       ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ Email                               ‚îÇ
‚îÇ nvan@fpt.com                        ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ M√£ nh√¢n vi√™n                        ‚îÇ
‚îÇ 00196993                            ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ S·ªë ƒëi·ªán tho·∫°i                       ‚îÇ
‚îÇ 0965874475                          ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ          [H·ªßy li√™n k·∫øt üóëÔ∏è]          ‚îÇ
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tr·∫°ng th√°i v√† th√¥ng b√°o
```mermaid
stateDiagram-v2
    [*] --> NotInstalled : FPT Pay ch∆∞a c√†i
    [*] --> NotLinked : FPT Pay ƒë√£ c√†i, ch∆∞a li√™n k·∫øt
    [*] --> Linked : ƒê√£ li√™n k·∫øt
    
    NotInstalled --> Installing : User c√†i ƒë·∫∑t app
    Installing --> NotLinked : C√†i ƒë·∫∑t th√†nh c√¥ng
    Installing --> NotInstalled : C√†i ƒë·∫∑t th·∫•t b·∫°i
    
    NotLinked --> Linking : B·∫Øt ƒë·∫ßu li√™n k·∫øt
    Linking --> Linked : Li√™n k·∫øt th√†nh c√¥ng
    Linking --> NotLinked : Li√™n k·∫øt th·∫•t b·∫°i
    
    Linked --> Unlinking : H·ªßy li√™n k·∫øt
    Unlinking --> NotLinked : H·ªßy th√†nh c√¥ng
    Unlinking --> Linked : H·ªßy th·∫•t b·∫°i
```

## API Specifications | ƒê·∫∑c t·∫£ API

### POST /api/wallet/link
```yaml
summary: Li√™n k·∫øt v√≠ FPT Pay
requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        properties:
          wallet_type:
            type: string
            enum: ['FPT_PAY']
          auth_token:
            type: string
            description: Token t·ª´ FPT Pay
          device_info:
            type: object
            properties:
              device_id: string
              os_version: string
              app_version: string
responses:
  200:
    description: Li√™n k·∫øt th√†nh c√¥ng
    schema:
      type: object
      properties:
        success: boolean
        data:
          type: object
          properties:
            account_id: string
            phone_number: string
            email: string
            full_name: string
            linked_date: string
  400:
    description: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
  409:
    description: T√†i kho·∫£n ƒë√£ li√™n k·∫øt
```

### DELETE /api/wallet/unlink
```yaml
summary: H·ªßy li√™n k·∫øt v√≠
parameters:
  - name: wallet_type
    in: query
    required: true
    schema:
      type: string
      enum: ['FPT_PAY']
responses:
  200:
    description: H·ªßy li√™n k·∫øt th√†nh c√¥ng
  400:
    description: Kh√¥ng th·ªÉ h·ªßy li√™n k·∫øt (c√≥ giao d·ªãch ƒëang x·ª≠ l√Ω)
  404:
    description: Kh√¥ng t√¨m th·∫•y li√™n k·∫øt
```

### GET /api/wallet/status
```yaml
summary: Ki·ªÉm tra tr·∫°ng th√°i li√™n k·∫øt
responses:
  200:
    schema:
      type: object
      properties:
        linked: boolean
        wallet_info:
          type: object
          properties:
            account_id: string
            masked_phone: string
            full_name: string
            linked_date: string
            last_used: string
```

## T√≠ch h·ª£p b·∫£o m·∫≠t | Security Integration

### X√°c th·ª±c v√† ph√¢n quy·ªÅn
```mermaid
flowchart TD
    Request[API Request] --> ValidateSession{Session h·ª£p l·ªá?}
    ValidateSession -->|Kh√¥ng| Return401[401 Unauthorized]
    ValidateSession -->|C√≥| CheckPermission{C√≥ quy·ªÅn li√™n k·∫øt?}
    
    CheckPermission -->|Kh√¥ng| Return403[403 Forbidden]
    CheckPermission -->|C√≥| ValidateToken{Token FPT Pay h·ª£p l·ªá?}
    
    ValidateToken -->|Kh√¥ng| Return400[400 Bad Request]
    ValidateToken -->|C√≥| CheckDuplicate{ƒê√£ li√™n k·∫øt tr∆∞·ªõc ƒë√¢y?}
    
    CheckDuplicate -->|C√≥| Return409[409 Conflict]
    CheckDuplicate -->|Kh√¥ng| ProcessLink[X·ª≠ l√Ω li√™n k·∫øt]
    
    ProcessLink --> EncryptData[M√£ h√≥a th√¥ng tin nh·∫°y c·∫£m]
    EncryptData --> SaveDB[L∆∞u database]
    SaveDB --> Return200[200 Success]
    
    style ValidateSession fill:#e3f2fd
    style CheckPermission fill:#fff3e0
    style EncryptData fill:#e8f5e8
```

### B·∫£o m·∫≠t th√¥ng tin nh·∫°y c·∫£m
- **M√£ h√≥a:** Th√¥ng tin t√†i kho·∫£n ƒë∆∞·ª£c m√£ h√≥a AES-256
- **Masking:** S·ªë ƒëi·ªán tho·∫°i hi·ªÉn th·ªã d·∫°ng 096***4475
- **Token expiry:** Token li√™n k·∫øt c√≥ th·ªùi h·∫°n 24h
- **Audit log:** Ghi nh·∫≠n t·∫•t c·∫£ thao t√°c li√™n k·∫øt/h·ªßy li√™n k·∫øt

## Testing Scenarios | K·ªãch b·∫£n ki·ªÉm th·ª≠

### Test Case 1: Li√™n k·∫øt th√†nh c√¥ng
```
Precondition: User ch∆∞a li√™n k·∫øt, ƒë√£ c√†i FPT Pay
Steps:
1. V√†o m√†n h√¨nh "Ph∆∞∆°ng th·ª©c thanh to√°n"
2. Nh·∫•n "FPT Pay"
3. ƒêƒÉng nh·∫≠p FPT Pay th√†nh c√¥ng
4. X√°c nh·∫≠n li√™n k·∫øt
Expected: Hi·ªÉn th·ªã th√¥ng tin t√†i kho·∫£n ƒë√£ li√™n k·∫øt
```

### Test Case 2: FPT Pay ch∆∞a c√†i
```
Precondition: FPT Pay ch∆∞a ƒë∆∞·ª£c c√†i tr√™n thi·∫øt b·ªã
Steps:
1. Nh·∫•n "FPT Pay"
Expected: Hi·ªÉn th·ªã th√¥ng b√°o "T√†i kho·∫£n c·ªßa b·∫°n ch∆∞a li√™n k·∫øt v√≠ FPT Pay. Vui l√≤ng t·∫£i v√† c√†i ƒë·∫∑t FPT Pay..."
```

### Test Case 3: H·ªßy li√™n k·∫øt
```
Precondition: T√†i kho·∫£n ƒë√£ li√™n k·∫øt, kh√¥ng c√≥ giao d·ªãch pending
Steps:
1. V√†o m√†n h√¨nh th√¥ng tin t√†i kho·∫£n
2. Nh·∫•n "H·ªßy li√™n k·∫øt"
3. X√°c nh·∫≠n "ƒê·ªìng √Ω"
Expected: H·ªßy li√™n k·∫øt th√†nh c√¥ng, quay v·ªÅ tr·∫°ng th√°i ch∆∞a li√™n k·∫øt
```

### Test Case 4: Kh√¥ng th·ªÉ h·ªßy li√™n k·∫øt
```
Precondition: C√≥ giao d·ªãch ƒëang x·ª≠ l√Ω
Steps:
1. Nh·∫•n "H·ªßy li√™n k·∫øt"
Expected: Hi·ªÉn th·ªã th√¥ng b√°o kh√¥ng th·ªÉ h·ªßy do c√≥ giao d·ªãch pending
```

## Error Handling | X·ª≠ l√Ω l·ªói

### L·ªói li√™n k·∫øt
```yaml
link_errors:
  INVALID_CREDENTIALS: "Th√¥ng tin ƒëƒÉng nh·∫≠p FPT Pay kh√¥ng ch√≠nh x√°c"
  ACCOUNT_LOCKED: "T√†i kho·∫£n FPT Pay ƒë√£ b·ªã kh√≥a"
  NETWORK_ERROR: "L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i"
  SERVER_ERROR: "L·ªói h·ªá th·ªëng. Vui l√≤ng th·ª≠ l·∫°i sau"
  ALREADY_LINKED: "T√†i kho·∫£n n√†y ƒë√£ ƒë∆∞·ª£c li√™n k·∫øt v·ªõi v√≠ FPT Pay kh√°c"
  APP_NOT_INSTALLED: "Vui l√≤ng c√†i ƒë·∫∑t ·ª©ng d·ª•ng FPT Pay"
```

### L·ªói h·ªßy li√™n k·∫øt
```yaml
unlink_errors:
  PENDING_TRANSACTIONS: "Kh√¥ng th·ªÉ h·ªßy li√™n k·∫øt khi c√≥ giao d·ªãch ƒëang x·ª≠ l√Ω"
  NOT_LINKED: "T√†i kho·∫£n ch∆∞a ƒë∆∞·ª£c li√™n k·∫øt"
  INSUFFICIENT_PERMISSION: "Kh√¥ng c√≥ quy·ªÅn th·ª±c hi·ªán thao t√°c n√†y"
```

## Performance & Caching | Hi·ªáu su·∫•t & Cache

### Caching strategy
- **Link status:** Cache 5 ph√∫t
- **Account info:** Cache 10 ph√∫t  
- **App installation check:** Cache 1 ph√∫t
- **Permissions:** Cache 30 ph√∫t

### Performance metrics
- **Link process:** < 10 seconds end-to-end
- **Status check:** < 500ms
- **Unlink process:** < 3 seconds

---

**[‚¨ÖÔ∏è Quay l·∫°i Master Analysis](./MobinetNextgen_Master_Analysis.md)**

**Li√™n quan:**
- [Module Thanh to√°n](./MobinetNextgen_Payment_Analysis.md) - S·ª≠ d·ª•ng v√≠ ƒë√£ li√™n k·∫øt ƒë·ªÉ thanh to√°n
- [Module Xem h·∫°n m·ª©c thanh to√°n](./MobinetNextgen_PaymentLimit_Analysis.md) - Alternative khi h·∫øt h·∫°n m·ª©c